#!/usr/bin/env python
import argparse
import pathlib

from py_mmd_tools import nc_to_mmd


if __name__ == '__main__':
    parser = argparse.ArgumentParser()

    # Input file or thredds address?
    # Add to parse a directory?
    # Add to parse a whole server?
    parser.add_argument('-i', '--input-file',
                        type=pathlib.Path,
                        dest='input_file',
                        default=None,
                        help="Input file.")
    args = parser.parse_args()

    outdir = pathlib.Path('/home/elodief/Data/mmd/Output')
    outfile = (outdir / args.input_file.stem).with_suffix('.xml')

    md = nc_to_mmd.Nc_to_mmd(str(args.input_file), check_only=True)
    md = nc_to_mmd.Nc_to_mmd(str(args.input_file), outfile, check_only=False)
    ok = md.to_mmd()
    print(ok)

